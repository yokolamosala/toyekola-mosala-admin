"use strict";(self.webpackChunkverona_ng=self.webpackChunkverona_ng||[]).push([[2618],{2231:(y,p,n)=>{n.r(p),n.d(p,{SaaSDashboardModule:()=>J});var u=n(6814),h=n(707),g=n(9664),m=n(354),c=n(9252),d=n(4480),s=n(3259),a=n(2129),l=n(3620),t=n(9467),v=n(3859),f=n(553),Z=n(9862);let E=(()=>{class r{constructor(e){this.http=e}getRegisteredApplicantCount(e){return this.http.get(`${f.N.APIBase}getStatisticCount?centerId=${e}`)}getRegisteredByAgeGroupCount(e){return this.http.get(`${f.N.APIBase}getPersonCountByAgeGroup?centerId=${e}`)}getRegisteredByGenderGroupCount(e){return this.http.get(`${f.N.APIBase}genderCounts?centerId=${e}`)}getRegisteredByInterestCount(e){return this.http.get(`${f.N.APIBase}interestCounts?centerId=${e}`)}getRegisteredByEduLevelCount(e){return this.http.get(`${f.N.APIBase}eduLevelCounts?centerId=${e}`)}static#t=this.\u0275fac=function(i){return new(i||r)(t.LFG(Z.eN))};static#e=this.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"})}return r})();var O=n(1780),A=n(5359);const S=r=>({width:r});function T(r,C){if(1&r&&(t.TgZ(0,"li",33)(1,"div",34)(2,"span",35),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"number"),t.qZA()(),t.TgZ(7,"div",36),t._UZ(8,"div",37),t.qZA()()),2&r){const e=C.$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(i.jobDescriptions[e.interest]||e.interest),t.xp6(2),t.hij("",t.xi3(6,6,e.percentage,"1.0-2"),"%"),t.xp6(3),t.Gre("h-full ",e.color,""),t.Q6J("ngStyle",t.VKq(9,S,e.percentage+"%"))}}function w(r,C){if(1&r&&(t.TgZ(0,"li",33)(1,"div",34)(2,"span",35),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.ALo(6,"number"),t.qZA()(),t.TgZ(7,"div",36),t._UZ(8,"div",37),t.qZA()()),2&r){const e=C.$implicit,i=t.oxw(2);t.xp6(3),t.Oqu(i.jobDescriptions[e.interest]||e.interest),t.xp6(2),t.hij("",t.xi3(6,6,e.percentage,"1.0-2"),"%"),t.xp6(3),t.Gre("h-full ",e.color,""),t.Q6J("ngStyle",t.VKq(9,S,e.percentage+"%"))}}function L(r,C){if(1&r&&(t.TgZ(0,"div",26)(1,"div",15)(2,"h5"),t._uU(3,"M\xe9tier \xe0 Apprendre"),t.qZA(),t.TgZ(4,"div",27)(5,"div",28)(6,"ul",29),t.YNc(7,T,9,11,"li",30),t.qZA()(),t.TgZ(8,"div",31),t._UZ(9,"p-divider",32),t.qZA(),t.TgZ(10,"div",28)(11,"ul",29),t.YNc(12,w,9,11,"li",30),t.qZA()()()()()),2&r){const e=t.oxw();t.xp6(7),t.Q6J("ngForOf",e.firstColumn),t.xp6(5),t.Q6J("ngForOf",e.secondColumn)}}let I=(()=>{class r{constructor(e,i,o){this.layoutService=e,this.dashboardService=i,this.centerSelectionService=o,this.applicationCount={totalApplicationCount:0,totalApplicationCountForDay:0},this.ageGroup=[],this.labelsListAge=[],this.dataListAge=[],this.educationGroup=[],this.labelsListEducation=[],this.dataListEducation=[],this.genderGroups=[],this.labelsListGender=[],this.dataListGender=[],this.interests=[],this.totalPersonCount=0,this.interestPercentages=[],this.firstColumn=[],this.secondColumn=[],this.selectedCenter=null,this.jobDescriptions={BTP001:"Construction professions",HOTEL1:"Hotel industry",SOU001:"Welding",CHAU01:"Professional drivers (trucks and heavy machinery)",AVHOT1:"Aviation: Training of flight attendants and stewards",COUT01:"Cutting and sewing",ICT001:"Computer science and new information and communication technologies",MENU01:"Carpentry",ECO001:"Eco-guard",FOR001:"Forestry",ADM001:"Administration (Executive Secretariat, logistics management, etc.)",AGRO01:"Agro-silvo-pastoral",ELE001:"Electricity and electronics",CLIM01:"Cold and air conditioning"},this.subscription=this.layoutService.configUpdate$.pipe((0,l.b)(25)).subscribe(b=>{this.initCharts()})}ngOnInit(){this.centerSelectionService.selectedCenter$.subscribe(e=>{e&&this.loadDataForCenter(e)})}loadDataForCenter(e){this.dashboardService.getRegisteredApplicantCount(e).subscribe(i=>{this.applicationCount=i}),this.dashboardService.getRegisteredByAgeGroupCount(e).subscribe(i=>{this.ageGroup=i,this.labelsListAge=[],this.dataListAge=[],this.ageGroup.forEach(o=>{this.labelsListAge.push(o.ageGroup),this.dataListAge.push(o.personCount)}),this.initCharts()}),this.dashboardService.getRegisteredByEduLevelCount(e).subscribe(i=>{this.educationGroup=i,this.labelsListEducation=[],this.dataListEducation=[],this.educationGroup.forEach(o=>{this.labelsListEducation.push(o.educationLevel),this.dataListEducation.push(o.personCount)}),this.initCharts()}),this.dashboardService.getRegisteredByGenderGroupCount(e).subscribe(i=>{this.genderGroups=i,this.labelsListGender=[],this.dataListGender=[],this.genderGroups.forEach(o=>{this.labelsListGender.push(o.gender),this.dataListGender.push(o.personCount)}),this.initCharts()}),this.dashboardService.getRegisteredByInterestCount(e).subscribe(i=>{this.interests=i,this.calculatePercentages(),this.splitColumns()})}calculatePercentages(){this.totalPersonCount=this.interests.reduce((i,o)=>i+o.personCount,0);const e=["bg-orange-500","bg-indigo-500","bg-blue-500","bg-green-500","bg-purple-500","bg-yellow-500","bg-teal-500"];this.interestPercentages=this.interests.map((i,o)=>({interest:i.interest,percentage:this.totalPersonCount>0?i.personCount/this.totalPersonCount*100:0,color:e[o%e.length]}))}splitColumns(){const e=Math.ceil(this.interestPercentages.length/2);this.firstColumn=this.interestPercentages.slice(0,e),this.secondColumn=this.interestPercentages.slice(e)}getGenderColor(e){return getComputedStyle(document.documentElement).getPropertyValue("Male"===e?"--indigo-500":"--purple-500")}initCharts(){const e=getComputedStyle(document.documentElement),i=e.getPropertyValue("--text-color-secondary"),b=(e.getPropertyValue("--primary-color"),e.getPropertyValue("--primary-200")),j=e.getPropertyValue("--surface-border");this.overviewChartDataByAge={labels:this.labelsListAge,datasets:[{label:"Applicants",data:this.dataListAge,backgroundColor:["dark"===this.layoutService.config().colorScheme?"#879AAF":"#E4E7EB"],hoverBackgroundColor:[b],fill:!0,borderRadius:10,borderSkipped:"top bottom",barPercentage:.3}]},this.overviewChartDataByEducation={labels:this.labelsListEducation,datasets:[{label:"Applicants",data:this.dataListEducation,backgroundColor:["dark"===this.layoutService.config().colorScheme?"#879AAF":"#E4E7EB"],hoverBackgroundColor:[b],fill:!0,borderRadius:10,borderSkipped:"top bottom",barPercentage:.3}]},this.overviewChartOptions={plugins:{legend:{position:"bottom",align:"end",labels:{color:i}}},responsive:!0,hover:{mode:"index"},scales:{y:{max:7,min:0,ticks:{stepSize:0,callback:function(P,N){return P},color:i},grid:{borderDash:[2,2],color:j,drawBorder:!1}},x:{grid:{display:!1},ticks:{beginAtZero:!0,color:i}}}},this.revenueChartData={labels:this.labelsListGender,datasets:[{data:this.dataListGender,backgroundColor:[e.getPropertyValue("--purple-500"),e.getPropertyValue("--indigo-500")],borderWidth:0}]},this.revenueChartOptions={plugins:{legend:{display:!0,position:"bottom",labels:{color:i}}},responsive:!0,maintainAspectRatio:!1,cutout:"50%",layout:{padding:{top:10,bottom:10,left:10,right:10}}}}get colorScheme(){return this.layoutService.config().colorScheme}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}static#t=this.\u0275fac=function(i){return new(i||r)(t.Y36(v.P),t.Y36(E),t.Y36(O.$))};static#e=this.\u0275cmp=t.Xpm({type:r,selectors:[["ng-component"]],decls:47,vars:11,consts:[[1,"grid"],[1,"col-12","lg:col-6","xl:col-6"],[1,"card","h-full","p-0","overflow-hidden","flex","flex-column"],[1,"flex","align-items-center","p-3"],[1,"pi","pi-comments","text-6xl","text-purple-500"],[1,"ml-3"],[1,"text-purple-500","block","white-space-nowrap"],[1,"text-purple-500","block","text-4xl","font-bold"],["alt","interactions",1,"w-full","mt-auto",3,"src"],[1,"card","p-0","overflow-hidden","flex","flex-column"],[1,"pi","pi-users","text-6xl","text-blue-500"],[1,"text-blue-500","block","white-space-nowrap"],[1,"text-blue-500","block","text-4xl","font-bold"],["alt","utilisateurs",1,"w-full",3,"src"],[1,"col-12","xl:col-6"],[1,"card","h-full"],[1,"flex","justify-content-between","align-items-center","mb-3"],[1,"graph"],["type","bar","height","400px",3,"data","options"],["overviewchart",""],["class","col-12 md:col-6 lg:col-6",4,"ngIf"],[1,"col-12","md:col-6","xl:col-6"],[1,"flex","align-items-center","justify-content-between","mb-3"],[1,"m-0"],[1,"flex","flex-column","align-items-center","justify-content-center"],["type","doughnut",1,"mb-5",2,"width","100%","height","100%",3,"data","options"],[1,"col-12","md:col-6","lg:col-6"],[1,"d-flex","justify-content-between"],[1,"w-50"],[1,"list-none","m-0","p-0"],["class","mb-4",4,"ngFor","ngForOf"],[1,"divider"],["layout","vertical"],[1,"mb-4"],[1,"flex","align-items-center","justify-content-between","mb-2"],[1,"font-bold"],[1,"border-round","overflow-hidden","surface-200",2,"height",".5rem"],[3,"ngStyle"]],template:function(i,o){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),t._UZ(4,"i",4),t.TgZ(5,"div",5)(6,"span",6),t._uU(7,"INSCRITS AUJOURD'HUI"),t.qZA(),t.TgZ(8,"span",7),t._uU(9),t.qZA()()(),t._UZ(10,"img",8),t.qZA()(),t.TgZ(11,"div",1)(12,"div",9)(13,"div",3),t._UZ(14,"i",10),t.TgZ(15,"div",5)(16,"span",11),t._uU(17,"TOTAL DES CANDIDATS INSCRITS"),t.qZA(),t.TgZ(18,"span",12),t._uU(19),t.qZA()()(),t._UZ(20,"img",13),t.qZA()(),t.TgZ(21,"div",14)(22,"div",15)(23,"div",16)(24,"h5"),t._uU(25,"Aper\xe7u des candidats par groupe d'\xe2ge"),t.qZA()(),t.TgZ(26,"div",17),t._UZ(27,"p-chart",18,19),t.qZA()()(),t.TgZ(29,"div",14)(30,"div",15)(31,"div",16)(32,"h5"),t._uU(33,"Aper\xe7u des candidats par niveau d'\xe9ducation"),t.qZA()(),t.TgZ(34,"div",17),t._UZ(35,"p-chart",18,19),t.qZA()()(),t.YNc(37,L,13,2,"div",20),t.TgZ(38,"div",21)(39,"div",15)(40,"div",22)(41,"h5",23),t._uU(42,"Aper\xe7u Par Genre"),t.qZA()(),t._UZ(43,"br")(44,"br"),t.TgZ(45,"div",24),t._UZ(46,"p-chart",25),t.qZA()()()()),2&i&&(t.xp6(9),t.Oqu(o.applicationCount.totalApplicationCountForDay),t.xp6(1),t.Q6J("src","assets/demo/images/dashboard/interactions"+("light"===o.colorScheme?"":"-dark")+".svg",t.LSH),t.xp6(9),t.Oqu(o.applicationCount.totalApplicationCount),t.xp6(1),t.Q6J("src","assets/demo/images/dashboard/users"+("light"===o.colorScheme?"":"-dark")+".svg",t.LSH),t.xp6(7),t.Q6J("data",o.overviewChartDataByAge)("options",o.overviewChartOptions),t.xp6(8),t.Q6J("data",o.overviewChartDataByEducation)("options",o.overviewChartOptions),t.xp6(2),t.Q6J("ngIf",o.interestPercentages.length>0),t.xp6(9),t.Q6J("data",o.revenueChartData)("options",o.revenueChartOptions))},dependencies:[u.sg,u.O5,u.PC,c.C,A.i,u.JJ],styles:[".d-flex[_ngcontent-%COMP%]{display:flex}.w-50[_ngcontent-%COMP%]{width:50%}.divider[_ngcontent-%COMP%]{padding:0 10px;display:flex;align-items:center}.list-none[_ngcontent-%COMP%]{list-style-type:none;margin:0;padding:0}.mb-4[_ngcontent-%COMP%]{margin-bottom:1rem}.font-bold[_ngcontent-%COMP%]{font-weight:700}.flex[_ngcontent-%COMP%]{display:flex}.align-items-center[_ngcontent-%COMP%]{align-items:center}.justify-content-between[_ngcontent-%COMP%]{justify-content:space-between}.border-round[_ngcontent-%COMP%]{border-radius:.5rem}.overflow-hidden[_ngcontent-%COMP%]{overflow:hidden}.surface-200[_ngcontent-%COMP%]{background-color:#f1f3f5}.h-full[_ngcontent-%COMP%]{height:100%}.mx-2[_ngcontent-%COMP%]{margin-left:.5rem;margin-right:.5rem}"]})}return r})(),U=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[a.Bz.forChild([{path:"",component:I}]),a.Bz]})}return r})();var D=n(95),G=n(3965),B=n(8676),M=n(8039),R=n(6651),F=n(1230),$=n(4844),x=n(6263);let J=(()=>{class r{static#t=this.\u0275fac=function(i){return new(i||r)};static#e=this.\u0275mod=t.oAB({type:r});static#i=this.\u0275inj=t.cJS({imports:[u.ez,h.hJ,d.T,x.W,s.z,g.U$,m.L$,c.S,D.u5,G.kW,B.Q,M.F,R.q,F.Q,$.LU,x.W,A.x,U]})}return r})()},1954:(y,p,n)=>{n.d(p,{o:()=>c});var u=n(7394);class h extends u.w0{constructor(s,a){super()}schedule(s,a=0){return this}}const g={setInterval(d,s,...a){const{delegate:l}=g;return l?.setInterval?l.setInterval(d,s,...a):setInterval(d,s,...a)},clearInterval(d){const{delegate:s}=g;return(s?.clearInterval||clearInterval)(d)},delegate:void 0};var m=n(9039);class c extends h{constructor(s,a){super(s,a),this.scheduler=s,this.work=a,this.pending=!1}schedule(s,a=0){var l;if(this.closed)return this;this.state=s;const t=this.id,v=this.scheduler;return null!=t&&(this.id=this.recycleAsyncId(v,t,a)),this.pending=!0,this.delay=a,this.id=null!==(l=this.id)&&void 0!==l?l:this.requestAsyncId(v,this.id,a),this}requestAsyncId(s,a,l=0){return g.setInterval(s.flush.bind(s,this),l)}recycleAsyncId(s,a,l=0){if(null!=l&&this.delay===l&&!1===this.pending)return a;null!=a&&g.clearInterval(a)}execute(s,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const l=this._execute(s,a);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(s,a){let t,l=!1;try{this.work(s)}catch(v){l=!0,t=v||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),t}unsubscribe(){if(!this.closed){const{id:s,scheduler:a}=this,{actions:l}=a;this.work=this.state=this.scheduler=null,this.pending=!1,(0,m.P)(l,this),null!=s&&(this.id=this.recycleAsyncId(a,s,null)),this.delay=null,super.unsubscribe()}}}},9931:(y,p,n)=>{n.d(p,{v:()=>g});const u={now:()=>(u.delegate||Date).now(),delegate:void 0};class h{constructor(c,d=h.now){this.schedulerActionCtor=c,this.now=d}schedule(c,d=0,s){return new this.schedulerActionCtor(this,c).schedule(s,d)}}h.now=u.now;class g extends h{constructor(c,d=h.now){super(c,d),this.actions=[],this._active=!1}flush(c){const{actions:d}=this;if(this._active)return void d.push(c);let s;this._active=!0;do{if(s=c.execute(c.state,c.delay))break}while(c=d.shift());if(this._active=!1,s){for(;c=d.shift();)c.unsubscribe();throw s}}}},6321:(y,p,n)=>{n.d(p,{P:()=>m,z:()=>g});var u=n(1954);const g=new(n(9931).v)(u.o),m=g}}]);